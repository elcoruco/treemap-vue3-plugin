import{ref as t,computed as e,openBlock as n,createElementBlock as r,normalizeClass as i,createElementVNode as o,toDisplayString as a,unref as h,normalizeStyle as u}from"vue";function c(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function l(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=f)):void 0===e&&(e=s);for(var n,r,i,o,a,h=new v(t),u=[h];n=u.pop();)if((i=e(n.data))&&(a=(i=Array.from(i)).length))for(n.children=i,o=a-1;o>=0;--o)u.push(r=i[o]=new v(i[o])),r.parent=n,r.depth=n.depth+1;return h.eachBefore(d)}function s(t){return t.children}function f(t){return Array.isArray(t)?t[1]:null}function p(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function d(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function v(t){this.data=t,this.depth=this.height=0,this.parent=null}v.prototype=l.prototype={constructor:v,count:function(){return this.eachAfter(c)},each:function(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this},eachAfter:function(t,e){for(var n,r,i,o=this,a=[o],h=[],u=-1;o=a.pop();)if(h.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);for(;o=h.pop();)t.call(e,o,++u,this);return this},eachBefore:function(t,e){for(var n,r,i=this,o=[i],a=-1;i=o.pop();)if(t.call(e,i,++a,this),n=i.children)for(r=n.length-1;r>=0;--r)o.push(n[r]);return this},find:function(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();for(;t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return l(this).eachBefore(p)},[Symbol.iterator]:function*(){var t,e,n,r,i=this,o=[i];do{for(t=o.reverse(),o=[];i=t.pop();)if(yield i,e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n])}while(o.length)}};const g=o("h1",null,null,-1),m=["viewBox"];var w={__name:"TreemapView",props:["width","height","background","data","margin","color"],setup(c){const s=c,f=t({top:10,right:10,bottom:50,left:50}),p=t(400),d=t(400),v=t("black"),w=t("white"),y=e((()=>s.width||d.value)),k=e((()=>s.height||p.value)),_=e((()=>s.background||w.value));e((()=>s.margin||f.value)),e((()=>s.color||v.value));const b=l({name:"root",children:[{name:"child #1"},{name:"child #2",children:[{name:"grandchild #1"},{name:"grandchild #2"},{name:"grandchild #3"}]}]}).sum((t=>t.value));return(t,e)=>(n(),r("div",{class:i("gf_simplestack_container")},[g,o("pre",null,"      "+a(h(b))+"\n    ",1),(n(),r("svg",{ref:"svg",xmlns:"http://www.w3.org/2000/svg",style:u({background:h(_)}),version:"1.2",baseProfile:"tiny",width:"100%",height:"100%",viewBox:`0 0 ${h(y)} ${h(k)}`,"stroke-linecap":"round","stroke-linejoin":"round",class:i("gf_simplestack_svg")},null,14,m))],2))},__file:"src/TreemapView.vue"},y={install:(t,e)=>{t.component("gf-treemap",w)}};export{y as default};
